---
import Layout from "../layouts/Layout.astro";
import CtaBanner from "../components/CtaBanner.astro";
import { siteConfig } from "../site.config";

const services = [
  "Emergency Plumbing",
  "Bathroom Installation",
  "Boiler Repair",
  "Central Heating",
  "Drain Unblocking",
  "Kitchen Plumbing",
  "Other",
];

const faqs = [
  {
    question: "How quickly can you get to me?",
    answer: "For emergencies, we aim to be at your door within one hour across Greater Manchester. For scheduled work, we typically offer appointments within 2–3 working days, though we can often fit urgent non-emergency jobs in sooner. We'll always give you a specific time window so you're not left waiting around.",
  },
  {
    question: "Do you charge a call-out fee?",
    answer: "No — we never charge a call-out fee. You'll receive a clear, upfront quote before any work begins, and the price we quote is the price you pay. There are no hidden extras, no surcharges for evenings or weekends on emergency calls, and no nasty surprises on your invoice.",
  },
  {
    question: "Are you Gas Safe registered?",
    answer: "Yes, Smith Plumbing is fully Gas Safe registered (Reg. No. 547821). All of our engineers who carry out gas work hold individual Gas Safe ID cards, which they're happy to show you on arrival. You can also verify our registration directly on the Gas Safe Register website.",
  },
  {
    question: "Do you offer guarantees on your work?",
    answer: "Absolutely. All of our workmanship comes with a 12-month guarantee as standard. If anything we've fitted or repaired develops a fault within that period, we'll come back and put it right at no extra cost. Manufacturer warranties on parts and appliances apply on top of this.",
  },
];
---

<Layout title="Contact" description="Get in touch with Smith Plumbing. Call 0161 555 0199 for a free quote or use our online form. 24/7 emergency service available.">

  <!-- Hero Banner -->
  <section class="relative flex min-h-[40vh] items-center justify-center overflow-hidden">
    <div class="absolute inset-0 bg-brand-dark" aria-hidden="true">
      <div class="absolute inset-0 opacity-100" style="background:
        radial-gradient(ellipse 80% 50% at 50% -20%, rgba(27,77,142,0.6), transparent),
        radial-gradient(ellipse 60% 40% at 80% 110%, rgba(27,77,142,0.35), transparent),
        linear-gradient(180deg, #0a1e38 0%, #0F2B4C 40%, #132d4a 100%);">
      </div>
      <div class="absolute inset-0 opacity-[0.04]" style="background-image:
        linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px);
        background-size: 40px 40px;">
      </div>
    </div>

    <div class="relative z-10 mx-auto max-w-4xl px-4 py-16 text-center sm:px-6 lg:px-8">
      <nav class="mb-6 text-sm text-blue-200/60" aria-label="Breadcrumb">
        <ol class="flex items-center justify-center gap-2">
          <li><a href="/" class="transition-colors hover:text-white">Home</a></li>
          <li aria-hidden="true">&rsaquo;</li>
          <li class="text-white font-medium">Contact</li>
        </ol>
      </nav>

      <div class="mx-auto mb-6 h-1 w-16 rounded-full bg-brand-secondary"></div>
      <h1 class="text-3xl font-extrabold tracking-tight text-white sm:text-4xl md:text-5xl">
        Get in Touch
      </h1>
      <p class="mt-4 text-lg text-blue-200/80 sm:text-xl">
        Request a free quote or ask us anything — we're here to help
      </p>
    </div>
  </section>

  <!-- Contact Form + Details -->
  <section class="bg-white py-16 sm:py-24">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="grid gap-12 lg:grid-cols-5 lg:gap-16">

        <!-- Left Column — Form -->
        <div class="lg:col-span-3">
          <h2 class="text-2xl font-bold text-brand-dark sm:text-3xl">Send Us a Message</h2>
          <div class="mt-3 h-1 w-12 rounded-full bg-brand-secondary"></div>
          <p class="mt-4 text-gray-600">
            Fill in the form below and we'll get back to you within a few hours during working hours.
          </p>

          <form action="#" method="POST" class="mt-8 space-y-6">
            <!-- Name -->
            <div>
              <label for="name" class="block text-sm font-semibold text-brand-dark">Name <span class="text-red-500">*</span></label>
              <input
                type="text"
                id="name"
                name="name"
                required
                autocomplete="name"
                class="mt-1.5 block w-full rounded-lg border border-gray-300 px-4 py-3 text-brand-dark shadow-sm transition-colors focus:border-brand-primary focus:ring-2 focus:ring-brand-primary/20 focus:outline-none"
                placeholder="Your full name"
              />
            </div>

            <!-- Email -->
            <div>
              <label for="email" class="block text-sm font-semibold text-brand-dark">Email <span class="text-red-500">*</span></label>
              <input
                type="email"
                id="email"
                name="email"
                required
                autocomplete="email"
                class="mt-1.5 block w-full rounded-lg border border-gray-300 px-4 py-3 text-brand-dark shadow-sm transition-colors focus:border-brand-primary focus:ring-2 focus:ring-brand-primary/20 focus:outline-none"
                placeholder="you@example.com"
              />
            </div>

            <!-- Phone -->
            <div>
              <label for="phone" class="block text-sm font-semibold text-brand-dark">Phone <span class="text-sm font-normal text-gray-400">(optional)</span></label>
              <input
                type="tel"
                id="phone"
                name="phone"
                autocomplete="tel"
                class="mt-1.5 block w-full rounded-lg border border-gray-300 px-4 py-3 text-brand-dark shadow-sm transition-colors focus:border-brand-primary focus:ring-2 focus:ring-brand-primary/20 focus:outline-none"
                placeholder="07XXX XXXXXX"
              />
            </div>

            <!-- Service -->
            <div>
              <label for="service" class="block text-sm font-semibold text-brand-dark">Service</label>
              <select
                id="service"
                name="service"
                class="mt-1.5 block w-full rounded-lg border border-gray-300 px-4 py-3 text-brand-dark shadow-sm transition-colors focus:border-brand-primary focus:ring-2 focus:ring-brand-primary/20 focus:outline-none"
              >
                <option value="">Select a service</option>
                {services.map((s) => (
                  <option value={s}>{s}</option>
                ))}
              </select>
            </div>

            <!-- Message -->
            <div>
              <label for="message" class="block text-sm font-semibold text-brand-dark">Message <span class="text-red-500">*</span></label>
              <textarea
                id="message"
                name="message"
                required
                rows="5"
                class="mt-1.5 block w-full rounded-lg border border-gray-300 px-4 py-3 text-brand-dark shadow-sm transition-colors focus:border-brand-primary focus:ring-2 focus:ring-brand-primary/20 focus:outline-none resize-y"
                placeholder="Tell us about your plumbing issue or project..."
              ></textarea>
            </div>

            <!-- Submit -->
            <button
              type="submit"
              class="inline-flex items-center justify-center gap-2 rounded-lg bg-brand-primary px-8 py-3.5 text-base font-bold text-white shadow-sm transition-all hover:bg-brand-dark hover:shadow-md"
            >
              Send Message
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
            </button>
          </form>
        </div>

        <!-- Right Column — Contact Details -->
        <div class="lg:col-span-2">
          <h2 class="text-2xl font-bold text-brand-dark sm:text-3xl">Contact Details</h2>
          <div class="mt-3 h-1 w-12 rounded-full bg-brand-secondary"></div>

          <div class="mt-8 space-y-6">

            <!-- Phone -->
            <div class="flex items-start gap-4">
              <div class="flex h-11 w-11 shrink-0 items-center justify-center rounded-lg bg-brand-light text-brand-primary">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
              </div>
              <div>
                <p class="text-sm font-semibold text-brand-dark">Phone</p>
                <a href={`tel:${siteConfig.phone.replace(/\s/g, "")}`} class="text-brand-primary transition-colors hover:text-brand-secondary">
                  {siteConfig.phone}
                </a>
              </div>
            </div>

            <!-- Email -->
            <div class="flex items-start gap-4">
              <div class="flex h-11 w-11 shrink-0 items-center justify-center rounded-lg bg-brand-light text-brand-primary">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
              </div>
              <div>
                <p class="text-sm font-semibold text-brand-dark">Email</p>
                <a href={`mailto:${siteConfig.email}`} class="text-brand-primary transition-colors hover:text-brand-secondary">
                  {siteConfig.email}
                </a>
              </div>
            </div>

            <!-- Address -->
            <div class="flex items-start gap-4">
              <div class="flex h-11 w-11 shrink-0 items-center justify-center rounded-lg bg-brand-light text-brand-primary">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
              </div>
              <div>
                <p class="text-sm font-semibold text-brand-dark">Address</p>
                <p class="text-gray-600">{siteConfig.address.full}</p>
              </div>
            </div>

            <!-- Opening Hours -->
            <div class="flex items-start gap-4">
              <div class="flex h-11 w-11 shrink-0 items-center justify-center rounded-lg bg-brand-light text-brand-primary">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
              </div>
              <div>
                <p class="text-sm font-semibold text-brand-dark">Opening Hours</p>
                <p class="text-gray-600">Mon – Fri: 8am – 6pm</p>
                <p class="text-gray-600">Sat: 9am – 1pm</p>
                <p class="text-sm font-medium text-brand-secondary">24/7 for emergencies</p>
              </div>
            </div>

          </div>

          <!-- Google Maps Embed -->
          <div class="mt-8 overflow-hidden rounded-xl border border-gray-200 shadow-sm">
            <iframe
              src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d9532.565344203744!2d-2.2479!3d53.4808!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x487a4d4c5226f5db%3A0xd9be143804fe6baa!2sManchester%2C%20UK!5e0!3m2!1sen!2suk!4v1700000000000!5m2!1sen!2suk"
              width="100%"
              height="280"
              style="border:0;"
              allowfullscreen=""
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
              title="Smith Plumbing location — Manchester, UK"
            ></iframe>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="bg-gray-50 py-16 sm:py-24">
    <div class="mx-auto max-w-3xl px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <h2 class="text-3xl font-bold text-brand-dark sm:text-4xl">Frequently Asked Questions</h2>
        <div class="mx-auto mt-3 h-1 w-12 rounded-full bg-brand-secondary"></div>
      </div>

      <div class="mt-12 space-y-4" id="faq-list">
        {faqs.map((faq, i) => (
          <div class="faq-item rounded-xl border border-gray-200 bg-white shadow-sm">
            <button
              type="button"
              class="faq-toggle flex w-full items-center justify-between gap-4 px-6 py-5 text-left"
              aria-expanded="false"
              aria-controls={`faq-answer-${i}`}
            >
              <span class="text-base font-semibold text-brand-dark sm:text-lg">{faq.question}</span>
              <svg xmlns="http://www.w3.org/2000/svg" class="faq-chevron h-5 w-5 shrink-0 text-brand-primary transition-transform duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9l6 6 6-6"/></svg>
            </button>
            <div
              id={`faq-answer-${i}`}
              class="faq-answer hidden px-6 pb-5"
            >
              <p class="leading-relaxed text-gray-600">{faq.answer}</p>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- CTA Banner -->
  <CtaBanner />

</Layout>

<script>
  document.querySelectorAll('.faq-toggle').forEach((button) => {
    button.addEventListener('click', () => {
      const item = button.closest('.faq-item')!;
      const answer = item.querySelector('.faq-answer')!;
      const chevron = item.querySelector('.faq-chevron')!;
      const isOpen = button.getAttribute('aria-expanded') === 'true';

      // Close all other items
      document.querySelectorAll('.faq-item').forEach((other) => {
        if (other !== item) {
          other.querySelector('.faq-answer')!.classList.add('hidden');
          other.querySelector('.faq-toggle')!.setAttribute('aria-expanded', 'false');
          other.querySelector('.faq-chevron')!.classList.remove('rotate-180');
        }
      });

      // Toggle current item
      answer.classList.toggle('hidden', isOpen);
      button.setAttribute('aria-expanded', String(!isOpen));
      chevron.classList.toggle('rotate-180', !isOpen);
    });
  });
</script>
